(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{8907:function(e,s,r){Promise.resolve().then(r.bind(r,7286))},7286:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return k}});var t=r(3827),o=r(4090),a=r(5680),n=r(1528),i=r(1945),c=r(5175),l=r(5270),u=r(8567),d=r(1587),m=r(2212),p=r(9732),g=r(8543),h=r(4174),v=r(3172);let{Text:f}=n.default,y=()=>{let[e]=i.Z.useForm(),[s,r]=(0,o.useState)(!1),[n,f]=(0,o.useState)({}),y=(0,o.useCallback)(async()=>{r(!0);try{let s=await g.Q.getCommonCookies();s.cookies&&(f(s.cookies),e.setFieldsValue({cookies:JSON.stringify(s.cookies,null,2)}))}catch(e){c.ZP.error("获取公共 Cookie 失败")}finally{r(!1)}},[e]);(0,o.useEffect)(()=>{y()},[y]);let k=async e=>{try{r(!0),await g.Q.updateCommonCookies(e.cookies),c.ZP.success("更新成功"),y()}catch(e){console.error("Failed to update common cookies:",e),c.ZP.error("更新失败")}finally{r(!1)}},Z=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(n,null,2)),c.ZP.success("已复制到剪贴板")}catch(e){c.ZP.error("复制失败")}},x=Object.entries(n).map(e=>{let[s,r]=e;return{key:s,name:s,value:r}});return(0,t.jsx)(a.Z,{title:"公共 Cookie 管理",children:(0,t.jsxs)(l.Z,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,t.jsx)(u.Z,{title:"当前 Cookie",extra:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(d.ZP,{icon:(0,t.jsx)(h.Z,{}),onClick:Z,disabled:0===Object.keys(n).length,children:"复制"}),(0,t.jsx)(d.ZP,{icon:(0,t.jsx)(v.Z,{}),onClick:y,loading:s,children:"刷新"})]}),children:(0,t.jsx)(m.Z,{columns:[{title:"Cookie 名称",dataIndex:"name",key:"name",width:"30%"},{title:"Cookie 值",dataIndex:"value",key:"value",width:"70%",ellipsis:!1,render:e=>(0,t.jsx)("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all",padding:"8px 0"},children:e})}],dataSource:x,pagination:!1,size:"small",scroll:{x:!0}})}),(0,t.jsx)(u.Z,{title:"更新 Cookie",children:(0,t.jsxs)(i.Z,{form:e,onFinish:k,layout:"vertical",children:[(0,t.jsx)(i.Z.Item,{label:"Cookie JSON",name:"cookies",rules:[{required:!0,message:"请输入 Cookie"},{validator:async(e,s)=>{if(s)try{JSON.parse(s)}catch(e){throw Error("请输入有效的 JSON 格式")}}}],help:"请输入有效的 JSON 格式的 Cookie 数据",children:(0,t.jsx)(p.Z.TextArea,{rows:10,placeholder:"请输入 JSON 格式的 Cookie 数据"})}),(0,t.jsx)(i.Z.Item,{children:(0,t.jsx)(d.ZP,{type:"primary",htmlType:"submit",loading:s,children:"保存"})})]})})]})})};function k(){return(0,t.jsx)(y,{})}},5680:function(e,s,r){"use strict";var t=r(3827),o=r(4090),a=r(6169),n=r(8188),i=r(8567),c=r(9519),l=r.n(c);s.Z=e=>{let{title:s,subTitle:r,extra:c,children:u,loading:d,footer:m,style:p,className:g="",showHeader:h=!0,contentCard:v=!0}=e,{token:f}=a.Z.useToken(),y=(0,o.useMemo)(()=>d?(0,t.jsx)(n.Z,{active:!0,title:!0,paragraph:!1,style:{width:180,height:38,margin:"8px 0"}}):s&&(0,t.jsx)("h1",{style:{fontSize:f.fontSizeHeading3,fontWeight:600,margin:0},children:s}),[d,s,f.fontSizeHeading3]),k=(0,o.useMemo)(()=>d&&r?(0,t.jsx)(n.Z,{active:!0,title:!1,paragraph:{rows:1,width:"60%"},style:{marginTop:f.marginXS}}):r&&(0,t.jsx)("div",{style:{color:f.colorTextSecondary,marginTop:f.marginXS},children:r}),[d,r,f.colorTextSecondary,f.marginXS]);return(0,t.jsxs)("div",{style:{backgroundColor:"transparent",...p},className:g,children:[h&&(s||r||c)&&(0,t.jsxs)("div",{style:{marginBottom:f.marginLG,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{children:[y,k]}),c&&(0,t.jsx)("div",{children:d?null:c})]}),(0,t.jsx)("div",{className:l().pageContainerContent,children:v?(0,t.jsx)(i.Z,{bodyStyle:{padding:0},loading:d,children:u}):d?(0,t.jsx)(n.Z,{active:!0,paragraph:{rows:8}}):u}),m&&(0,t.jsx)("div",{style:{marginTop:f.marginLG},children:d?(0,t.jsx)(n.Z,{active:!0,paragraph:{rows:1,width:["40%"]}}):m})]})}},4865:function(e,s,r){"use strict";r.d(s,{H:function(){return t},P:function(){return o}});let t={baseURL:r(9079).env.NEXT_PUBLIC_API_BASE_URL||"/"},o={accounts:{login:"/accounts/login",logout:e=>"/accounts/logout/".concat(e),list:"/accounts/list",status:e=>"/accounts/".concat(e,"/status"),commonCookies:"/accounts/common-cookies",refresh:e=>"/accounts/".concat(e,"/refresh")},models:{list:"/models",update:e=>"/models/update/".concat(e)}}},8749:function(e,s,r){"use strict";var t=r(3107),o=r(5175),a=r(3742),n=r(4865),i=r(6541),c=r(2825);let l=t.default.create({baseURL:n.H.baseURL,timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(async e=>{let s=i.O.getApiKey();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>(o.ZP.error("网络错误"),Promise.reject(new c.a(0,"NETWORK_ERROR","网络错误")))),l.interceptors.response.use(e=>e,async e=>{if(e.response){let{status:s,data:r,config:t}=e.response;console.error("API Error:",{status:s,data:r,url:t.url,method:t.method,params:t.params,requestData:t.data});let o=c.a.fromError(e);switch(s){case 400:a.ZP.error({message:"400 请求参数错误",description:o.message||"请求参数错误"});break;case 403:a.ZP.error({message:"403 禁止访问",description:"禁止访问"});break;case 404:a.ZP.error({message:"404 未找到",description:"未找到"});break;case 422:a.ZP.error({message:"422 请求验证错误",description:o.message||"请求验证错误"});break;case 429:a.ZP.warning({message:"429 请求过多",description:o.message||"请求过多"});break;case 500:a.ZP.error({message:"500 服务器错误",description:"服务器错误"});break;default:a.ZP.error({message:"未知错误",description:o.message||"未知错误"})}throw o}if(e.request)throw console.error("No response received:",e.request),a.ZP.error({message:"网络错误",description:"网络错误"}),new c.a(0,"NETWORK_ERROR","网络错误");throw console.error("Request configuration error:",e.message),a.ZP.error({message:"请求错误",description:"请求错误"}),new c.a(0,"REQUEST_FAILED","请求错误")}),s.Z=l},8543:function(e,s,r){"use strict";r.d(s,{Q:function(){return n}});var t=r(4865),o=r(8749),a=r(376);let n={async login(e){try{return await o.Z.post(t.P.accounts.login,e),{success:!0}}catch(e){if(e instanceof a.d7){var s,r;return{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"登录失败"}}return{success:!1,error:"登录失败"}}},async logout(e){try{return await o.Z.post(t.P.accounts.logout(e)),{success:!0}}catch(e){if(e instanceof a.d7){var s,r;return{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"登出失败"}}return{success:!1,error:"登出失败"}}},getAccounts:async()=>(await o.Z.get(t.P.accounts.list)).data,async updateAccountStatus(e,s){try{return await o.Z.post(t.P.accounts.status(e),s),{success:!0}}catch(e){if(e instanceof a.d7){var r,n;return{success:!1,error:(null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"更新账号状态失败"}}return{success:!1,error:"更新账号状态失败"}}},getCommonCookies:async()=>(await o.Z.get(t.P.accounts.commonCookies)).data.data,async updateCommonCookies(e){try{let s=JSON.parse(e);return await o.Z.post(t.P.accounts.commonCookies,{cookies:s}),{success:!0}}catch(e){if(e instanceof a.d7){var s,r;return{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"更新公共 Cookie 失败"}}return{success:!1,error:"更新公共 Cookie 失败"}}},async refreshCookie(e){try{return await o.Z.post(t.P.accounts.refresh(e)),{success:!0}}catch(e){if(e instanceof a.d7){var s,r;return{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"刷新 Cookie 失败"}}return{success:!1,error:"刷新 Cookie 失败"}}}}},6541:function(e,s,r){"use strict";r.d(s,{O:function(){return c}});var t=r(4865),o=r(8749),a=r(376),n=r(2825);let i={API_KEY:"qwen_api_key"},c={saveApiKey(e){localStorage.setItem(i.API_KEY,e)},getApiKey:()=>localStorage.getItem(i.API_KEY),async validateApiKey(e){try{let s=await o.Z.get("".concat(t.P.models.list),{headers:{Authorization:"Bearer ".concat(e)}});if(200===s.status)return this.saveApiKey(e),{success:!0};return{success:!1,error:"验证失败"}}catch(e){if(e instanceof n.a)return{success:!1,error:e.message||"API 密钥验证失败"};if(e instanceof a.d7){var s,r,i;if((null===(s=e.response)||void 0===s?void 0:s.status)===403)return{success:!1,error:"API 密钥无效或未授权访问"};return{success:!1,error:(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||"API 密钥验证失败"}}return{success:!1,error:"验证过程中发生未知错误"}}},async logout(){localStorage.removeItem(i.API_KEY)}}},2825:function(e,s,r){"use strict";r.d(s,{a:function(){return t}});class t extends Error{static fromError(e){if(e.response){var s,r;return new t(e.response.status,(null===(s=e.response.data)||void 0===s?void 0:s.code)||"UNKNOWN_ERROR",(null===(r=e.response.data)||void 0===r?void 0:r.detail)||"未知错误")}return new t(0,"UNKNOWN_ERROR",e.message||"未知错误")}constructor(e,s,r){super(r),this.statusCode=e,this.code=s,this.name="ApiException"}}},9519:function(e){e.exports={"page-container":"PageContainer_page-container__F2_vX",mobile:"PageContainer_mobile__HDFuu","mobile-content":"PageContainer_mobile-content__QrMA_","page-container-content":"PageContainer_page-container-content__jmDFL"}}},function(e){e.O(0,[587,385,205,518,610,212,492,971,69,744],function(){return e(e.s=8907)}),_N_E=e.O()}]);